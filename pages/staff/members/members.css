:root {
    --active-ratio: 2.5fr;
    --inactive-ratio: 1fr;
}

/* ===== DYNAMIC GRID SYSTEM ===== */
.members-grid-container {
    height: calc(100vh - 140px);
    /* Increased offset to prevent bottom cutoff */
    padding: 16px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    overflow: hidden;
    /* Ensure strict containment */
    grid-template-rows: 1fr 1fr;
    gap: 12px;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Header Date Pill */
.header-date {
    padding: 8px 20px;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 50px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.header-date i {
    color: var(--gold);
}

/* Grid Cell Base */
.grid-cell {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    cursor: pointer;
    overflow: hidden;
    position: relative;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
}

.grid-cell:hover {
    border-color: rgba(184, 150, 12, 0.5);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

/* Cell Header */
.cell-header {
    padding: 14px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
}

.cell-header .icon {
    width: 36px;
    height: 36px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    flex-shrink: 0;
}

.cell-header .icon.gold {
    background: rgba(184, 150, 12, 0.15);
    color: var(--gold);
}

.cell-header .icon.green {
    background: rgba(5, 150, 105, 0.15);
    color: var(--success);
}

.cell-header .icon.blue {
    background: rgba(59, 130, 246, 0.15);
    color: var(--info);
}

.cell-header .icon.orange {
    background: rgba(217, 119, 6, 0.15);
    color: var(--warning);
}

.cell-header .title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
}

.cell-header .badge {
    margin-left: auto;
    padding: 3px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 600;
    background: rgba(5, 150, 105, 0.15);
    color: var(--success);
}

/* Full Content (Always Visible for Who's In, others toggled) */
.cell-content {
    flex: 1;
    padding: 16px;
    overflow-y: auto;
    display: none;
    /* Default hidden for others */
}

/* Override for Who's In - Always show content */
[data-pos="top-left"] .cell-content {
    display: flex;
    flex-direction: column;
    padding: 0 12px 12px;
    /* Adjusted padding */
}

/* Hide preview logic completely */
[data-pos="top-right"] .cell-preview {
    display: none !important;
}

[data-pos="top-right"] .cell-content,
[data-pos="bottom-left"] .cell-content,
[data-pos="bottom-right"] .cell-content {
    display: flex;
    /* Always show content (under overlay when inactive) */
    flex-direction: column;
    padding: 16px;
    height: 100%;
    /* Fill cell */
}

/* Inactive Overlay for Scan Entry */
/* Inactive Overlay Shared Styles */
[data-pos="top-right"]:not(.active)::after,
[data-pos="bottom-left"]:not(.active)::after,
[data-pos="bottom-right"]:not(.active)::after {
    position: absolute;
    top: 50px;
    /* Below header */
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.7));
    backdrop-filter: blur(2px);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: 1px;
    z-index: 10;
    opacity: 1;
    transition: opacity 0.2s;
    pointer-events: none;
    /* Let click pass to grid-cell to activate */
}

/* Specific Content Strings */
[data-pos="top-right"]:not(.active)::after {
    content: "Click to Scan";
}

[data-pos="bottom-left"]:not(.active)::after {
    content: "Click to Register";
}

[data-pos="bottom-right"]:not(.active)::after {
    content: "Click to Search";
}

/* Hide scan buttons when inactive to keep it clean */
[data-pos="top-right"]:not(.active) .scan-buttons {
    display: none;
}

/* Disable interaction on bottom panels when inactive */
[data-pos="bottom-left"]:not(.active) .cell-content,
[data-pos="bottom-right"]:not(.active) .cell-content {
    pointer-events: none;
}

[data-pos="top-right"]:not(.active) .camera-status {
    display: none;
}

/* Show content when active for others */
.grid-cell.active .cell-content {
    display: block;
}

/* Hide preview when active */
.grid-cell.active .cell-preview {
    display: none;
}

/* Inactive State for Who's In */
/* Inactive State Hiding (Search, Buttons, etc.) */
[data-pos="top-left"]:not(.active) .whos-in-search,
[data-pos="top-left"]:not(.active) .minimize-btn,
[data-pos="bottom-left"]:not(.active) .minimize-btn,
[data-pos="bottom-right"]:not(.active) .minimize-btn,
[data-pos="top-left"]:not(.active) .member-list-header {
    /* Hide search and headers when inactive if desired, or keep headers? 
                User said "time in header should be aligned... same to the other header".
                User likely wants headers. I'll keep headers, hide search. */
    display: none;
}

[data-pos="top-left"]:not(.active) .member-list {
    padding: 0;
    /* Remove padding when small */
    gap: 4px;
}

[data-pos="top-left"]:not(.active) .member-item {
    padding: 8px 12px;
    grid-template-columns: 32px 1fr 0.8fr 60px 0px;
    /* Hide button column effectively or shift */
}

[data-pos="top-left"]:not(.active) .member-item .action-btn-left {
    display: none;
}

[data-pos="top-left"]:not(.active) .avatar {
    width: 32px;
    height: 32px;
    font-size: 11px;
}

/* ===== PREVIEW WIDGETS ===== */
.preview-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    font-size: 11px;
}

.preview-item .av {
    width: 24px;
    height: 24px;
    background: rgba(184, 150, 12, 0.12);
    color: var(--gold);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 9px;
    font-weight: 700;
}

.preview-item .nm {
    color: var(--text-primary);
    font-weight: 500;
}

.preview-item .mt {
    color: var(--text-muted);
    margin-left: auto;
    font-size: 10px;
}

.preview-hint {
    margin-top: auto;
    text-align: center;
    font-size: 10px;
    color: var(--text-dim);
    padding: 8px;
}

.preview-hint i {
    margin-right: 4px;
}

/* QR Preview */
.qr-preview {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    min-height: 80px;
}

.qr-preview i {
    font-size: 32px;
    color: var(--gold);
    opacity: 0.6;
}

/* Plan Preview - Larger for New Member */
[data-pos="bottom-left"] .plan-preview {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    flex: 1;
}

[data-pos="bottom-left"] .plan-mini {
    padding: 16px 12px;
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    text-align: center;
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

[data-pos="bottom-left"] .plan-mini .pn {
    font-size: 12px;
    color: var(--text-muted);
    font-weight: 500;
}

[data-pos="bottom-left"] .plan-mini .pp {
    font-size: 18px;
    font-weight: 700;
    color: var(--gold);
}

/* ===== EXPANDED LAYOUT STATES ===== */
/* When top-left is active */
/* When top-left is active */
/* When top-left is active */
.members-grid-container[data-active="top-left"] {
    grid-template-columns: var(--active-ratio) var(--inactive-ratio);
    grid-template-rows: var(--active-ratio) var(--inactive-ratio);
}

.members-grid-container[data-active="top-left"] [data-pos="top-left"] {
    grid-area: 1 / 1 / 2 / 2;
}

.members-grid-container[data-active="top-left"] [data-pos="top-right"] {
    grid-area: 1 / 2 / 2 / 3;
}

.members-grid-container[data-active="top-left"] [data-pos="bottom-left"] {
    grid-area: 2 / 1 / 3 / 2;
}

.members-grid-container[data-active="top-left"] [data-pos="bottom-right"] {
    grid-area: 2 / 2 / 3 / 3;
}

/* When top-right is active */
.members-grid-container[data-active="top-right"] {
    grid-template-columns: var(--inactive-ratio) var(--active-ratio);
    grid-template-rows: var(--active-ratio) var(--inactive-ratio);
}

.members-grid-container[data-active="top-right"] [data-pos="top-left"] {
    grid-area: 1 / 1 / 2 / 2;
}

.members-grid-container[data-active="top-right"] [data-pos="top-right"] {
    grid-area: 1 / 2 / 2 / 3;
}

.members-grid-container[data-active="top-right"] [data-pos="bottom-left"] {
    grid-area: 2 / 1 / 3 / 2;
}

.members-grid-container[data-active="top-right"] [data-pos="bottom-right"] {
    grid-area: 2 / 2 / 3 / 3;
}

/* When bottom-left is active */
.members-grid-container[data-active="bottom-left"] {
    grid-template-columns: var(--active-ratio) var(--inactive-ratio);
    grid-template-rows: var(--inactive-ratio) var(--active-ratio);
}

.members-grid-container[data-active="bottom-left"] [data-pos="top-left"] {
    grid-area: 1 / 1 / 2 / 2;
}

.members-grid-container[data-active="bottom-left"] [data-pos="top-right"] {
    grid-area: 1 / 2 / 2 / 3;
}

.members-grid-container[data-active="bottom-left"] [data-pos="bottom-left"] {
    grid-area: 2 / 1 / 3 / 2;
}

.members-grid-container[data-active="bottom-left"] [data-pos="bottom-right"] {
    grid-area: 2 / 2 / 3 / 3;
}

/* When bottom-right is active */
.members-grid-container[data-active="bottom-right"] {
    grid-template-columns: var(--inactive-ratio) var(--active-ratio);
    grid-template-rows: var(--inactive-ratio) var(--active-ratio);
}

.members-grid-container[data-active="bottom-right"] [data-pos="top-left"] {
    grid-area: 1 / 1 / 2 / 2;
}

.members-grid-container[data-active="bottom-right"] [data-pos="top-right"] {
    grid-area: 1 / 2 / 2 / 3;
}

.members-grid-container[data-active="bottom-right"] [data-pos="bottom-left"] {
    grid-area: 2 / 1 / 3 / 2;
}

/* Responsive "Who's In" List: Hide columns when squeezed */
.members-grid-container[data-active="top-right"] [data-pos="top-left"] .member-list-header,
.members-grid-container[data-active="bottom-right"] [data-pos="top-left"] .member-list-header,
.members-grid-container[data-active="top-right"] [data-pos="top-left"] .member-item,
.members-grid-container[data-active="bottom-right"] [data-pos="top-left"] .member-item {
    grid-template-columns: 48px 1fr !important;
}

.members-grid-container[data-active="top-right"] [data-pos="top-left"] .member-list-header>div:nth-child(n+3),
.members-grid-container[data-active="bottom-right"] [data-pos="top-left"] .member-list-header>div:nth-child(n+3),
.members-grid-container[data-active="top-right"] [data-pos="top-left"] .member-item>div:nth-child(n+3),
.members-grid-container[data-active="bottom-right"] [data-pos="top-left"] .member-item>div:nth-child(n+3),
.members-grid-container[data-active="top-right"] [data-pos="top-left"] .member-item>button,
.members-grid-container[data-active="bottom-right"] [data-pos="top-left"] .member-item>button {
    display: none !important;
}

.members-grid-container[data-active="bottom-right"] [data-pos="bottom-right"] {
    grid-area: 2 / 2 / 3 / 3;
}

/* Active cell shows full content */
.grid-cell.active .cell-preview {
    display: none;
}

.grid-cell.active .cell-content {
    display: flex;
    flex-direction: column;
}

.grid-cell.active {
    border-color: var(--gold);
}

/* Shrunk cells hide preview detail */
.grid-cell.shrunk .cell-preview {
    opacity: 0.5;
}

.grid-cell.shrunk .preview-hint {
    display: none;
}

/* ===== FULL CONTENT STYLES ===== */
.search-box {
    position: relative;
    margin-bottom: 12px;
}

.search-box i {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-dim);
    font-size: 12px;
}

.search-box input {
    width: 100%;
    padding: 10px 12px 10px 34px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 12px;
    font-family: inherit;
}

.search-box input:focus {
    outline: none;
    border-color: var(--gold);
}

.member-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
    flex: 1;
    overflow-y: auto;
}

/* Who's In List - Columnar Layout */
#whosInContent .member-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding-right: 4px;
    /* Space for scrollbar */
}

#whosInContent .member-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 4px 12px;
    overflow-y: auto;
    max-height: calc(100vh - 300px);
    /* Limit height */
}

.whos-in-search {
    padding: 0 12px 12px;
}

.whos-in-search input {
    width: 100%;
    padding: 8px 12px 8px 36px;
    /* Reduced vertical padding */
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 13px;
    box-sizing: border-box;
    /* Fix width overflow */
}

.whos-in-search input:focus {
    outline: none;
    border-color: var(--gold);
}

.whos-in-search .search-wrapper i {
    position: absolute;
    left: 14px;
    /* Closer to edge */
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    font-size: 13px;
    pointer-events: none;
    margin: 0;
    /* Reset margins */
}

/* Relative wrapper for search icon */
.whos-in-search .search-wrapper {
    position: relative;
}

/* Remove specific overrides if generic selector serves */

.member-list-header {
    display: grid;
    grid-template-columns: 48px 2fr 1.2fr 1.2fr 120px;
    /* Balanced proportions */
    padding: 0 16px 8px 16px;
    gap: 12px;
    font-size: 11px;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.member-list-header div:nth-child(4) {
    /* padding-left removal for alignment */
}

.member-list-header div:last-child {
    display: none;
}

#whosInContent .member-item {
    display: grid;
    grid-template-columns: 48px 2fr 1.2fr 1.2fr 120px;
    /* Match balanced */
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: right center;
}

/* Smooth transition for content appearance */
.cell-content {
    transition: opacity 0.3s ease;
}

/* Hover Effect: Highlight entire row instead of button */
/* Hover Effect: Highlight entire row */
#whosInContent .member-item:hover {
    transform: scale(1.01);
    /* Reduced scale */
    border-color: var(--gold);
    background: var(--bg-secondary);
    z-index: 5;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    /* transform-origin handled in base class */
}

/* Inactive Overlay for Who's In */
[data-pos="top-left"]:not(.active)::after {
    content: "Click to Manage";
    position: absolute;
    top: 60px;
    /* Below header */
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(2px);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: 1px;
    z-index: 10;
    opacity: 0;
    /* Initially hidden or always visible? User said "semi-visible dark div that covers" */
    transition: opacity 0.2s;
}

[data-pos="top-left"]:not(.active):hover::after {
    opacity: 1;
    /* Show text on hover, always darken? */
}

/* Make dark overlay always visible but text on hover? 
           User: "semi-visible dark div that covers... not header"
           Let's make bg always visible, text on hover.
        */
[data-pos="top-left"]:not(.active)::after {
    opacity: 1;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.7));
}

#whosInContent .member-item .avatar {
    width: 40px;
    height: 40px;
    font-size: 14px;
    background: rgba(184, 150, 12, 0.12);
    color: var(--gold);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
}

#whosInContent .member-item .col-info {
    display: flex;
    flex-direction: column;
}

#whosInContent .member-item .col-info .main-text {
    color: var(--text-primary);
    font-weight: 500;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

#whosInContent .member-item .col-info .sub-text {
    color: var(--text-muted);
    font-size: 11px;
}

#whosInContent .action-btn-left {
    width: 100%;
    padding: 8px;
    background: rgba(220, 38, 38, 0.1);
    color: var(--danger);
    border: 1px solid var(--danger);
    border-radius: var(--radius-sm);
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: uppercase;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

#whosInContent .action-btn-left:hover {
    background: var(--danger);
    color: white;
    /* Disabled default scale/translate transform on hover as row handles it */
    transform: none;
}

/* Increase Header Font and Size only for Who's In Panel Content */
.grid-cell[data-pos="top-left"] .cell-header .title {
    font-size: 20px;
    font-weight: 700;
    letter-spacing: 0.5px;
}

.grid-cell[data-pos="top-left"] .cell-header {
    padding-bottom: 12px;
}

/* Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* Updated Modal Styles */
.custom-modal {
    background: #18191a;
    border: 1px solid #333;
    border-radius: 12px;
    width: 90%;
    max-width: 360px;
    padding: 32px 24px;
    text-align: center;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
}

.modal-icon {
    width: 64px;
    height: 64px;
    background: rgba(220, 38, 38, 0.1);
    color: var(--danger);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 24px;
}

.modal-title {
    font-size: 20px;
    margin-bottom: 8px;
    color: var(--text-primary);
    letter-spacing: -0.5px;
}

.modal-text {
    color: var(--text-muted);
    margin-bottom: 28px;
    line-height: 1.5;
    font-size: 14px;
}

.modal-btn.confirm:hover {
    background: #000;
    color: #fff;
    border: 1px solid var(--gold);
}

/* Active Indicator */
.active-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(184, 150, 12, 0.15);
    padding: 6px 14px;
    border-radius: 20px;
    color: var(--gold);
    font-weight: 700;
    font-size: 13px;
    margin-left: 20px;
    /* Added spacing from title */
}

.active-indicator i {
    font-size: 14px;
}

/* Minimize Button */
.minimize-btn {
    position: absolute;
    top: 16px;
    /* Aligned with header padding */
    right: 16px;
    width: 32px;
    height: 32px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s;
    z-index: 10;
}

.minimize-btn:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

.grid-cell.active .minimize-btn {
    opacity: 1;
    visibility: visible;
}

.modal-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
}

.modal-btn {
    flex: 1;
    padding: 12px;
    border-radius: 50px;
    /* More rounded */
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid transparent;
    /* Prevent layout shift */
    text-transform: uppercase;
    font-size: 12px;
    letter-spacing: 1px;
}

.modal-btn.cancel {
    background: transparent;
    color: var(--text-muted);
    border: 1px solid var(--border);
}

.modal-btn.cancel:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--text-muted);
}

.modal-btn.confirm {
    background: #fff;
    color: #000;
}

.modal-btn.confirm:hover {
    background: #fff;
    color: #000;
    border-color: #fff;
    box-shadow: 0 5px 20px rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}

.modal-btn.cancel {
    background: var(--bg-tertiary);
    color: var(--text-muted);
}

.modal-btn.cancel:hover {
    background: var(--border);
    color: var(--text-primary);
}

.modal-btn.confirm {
    background: var(--gold);
    color: black;
}

.modal-btn.confirm:hover {
    background: #000;
    /* Black background on hover */
    color: #fff;
    /* White text on hover */
    border: 1px solid var(--gold);
}

.plan-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    margin-bottom: 12px;
}

.plan-card {
    padding: 14px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    text-align: center;
    cursor: pointer;
    transition: all 0.15s;
}

.plan-card:hover,
.plan-card.selected {
    border-color: var(--gold);
    background: rgba(184, 150, 12, 0.08);
}

.plan-card .plan-name {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-primary);
}

.plan-card .plan-price {
    font-size: 16px;
    font-weight: 700;
    color: var(--gold);
    margin-top: 4px;
}

.btn-primary {
    width: 100%;
    padding: 12px;
    background: var(--gradient-gold);
    border: none;
    border-radius: var(--radius-sm);
    color: #000;
    font-weight: 700;
    font-size: 12px;
    cursor: pointer;
    margin-top: auto;
}

.camera-view {
    height: 180px;
    background: #0a0a0a;
    border-radius: var(--radius-sm);
    position: relative;
    overflow: hidden;
    margin-bottom: 12px;
    border: 1px solid var(--border);
}

.camera-view .scan-line {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--gold);
    animation: scanMove 2s linear infinite;
}

@keyframes scanMove {
    0% {
        top: 0;
    }

    50% {
        top: calc(100% - 2px);
    }

    100% {
        top: 0;
    }
}

.camera-view .hint {
    position: absolute;
    bottom: 10px;
    width: 100%;
    text-align: center;
    color: rgba(255, 255, 255, 0.4);
    font-size: 10px;
}

.empty-state {
    text-align: center;
    padding: 20px;
    color: var(--text-muted);
}

.empty-state i {
    font-size: 20px;
    margin-bottom: 6px;
    opacity: 0.4;
    display: block;
}

.empty-state p {
    font-size: 11px;
}

/* ===== SCAN ENTRY MODERN LAYOUT ===== */
.scan-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    height: 100%;
}

.scan-camera-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.camera-container {
    flex: 1;
    background: #0a0a0a;
    border-radius: var(--radius-md);
    position: relative;
    overflow: hidden;
    border: 2px solid var(--border);
    min-height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.camera-container .scan-overlay {
    position: absolute;
    inset: 20px;
    border: 2px solid var(--gold);
    border-radius: var(--radius-sm);
    opacity: 0.6;
}

.camera-container .scan-overlay::before,
.camera-container .scan-overlay::after {
    content: '';
    position: absolute;
    background: var(--gold);
}

.camera-container .scan-overlay::before {
    top: -2px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 4px;
}

.camera-container .scan-overlay::after {
    bottom: -2px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 4px;
}

.camera-container .scan-beam {
    position: absolute;
    left: 20px;
    right: 20px;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
    animation: beamScan 2s ease-in-out infinite;
    box-shadow: 0 0 10px var(--gold);
}

@keyframes beamScan {

    0%,
    100% {
        top: 25px;
        opacity: 0.8;
    }

    50% {
        top: calc(100% - 25px);
        opacity: 1;
    }
}

.camera-container .camera-status {
    position: absolute;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: rgba(0, 0, 0, 0.7);
    border-radius: 20px;
    font-size: 10px;
    color: rgba(255, 255, 255, 0.7);
}

.camera-container .camera-status .dot {
    width: 6px;
    height: 6px;
    background: var(--success);
    border-radius: 50%;
    animation: pulse 1.5s infinite;
}

.scan-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
}

.scan-btn {
    padding: 10px;
    border-radius: var(--radius-sm);
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: all 0.2s;
}

.scan-btn.success {
    background: rgba(5, 150, 105, 0.15);
    border: 1px solid var(--success);
    color: var(--success);
}

.scan-btn.success:hover {
    background: rgba(5, 150, 105, 0.25);
}

.scan-btn.fail {
    background: rgba(220, 38, 38, 0.15);
    border: 1px solid var(--danger);
    color: var(--danger);
}

.scan-btn.fail:hover {
    background: rgba(220, 38, 38, 0.25);
}

/* Result Panel */
.scan-result-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.result-panel {
    flex: 1;
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
    padding: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    min-height: 200px;
}

.result-panel.waiting {
    color: var(--text-muted);
}

.result-panel.waiting i {
    font-size: 40px;
    margin-bottom: 12px;
    opacity: 0.3;
}

.result-panel.waiting p {
    font-size: 12px;
}

.result-panel.success {
    border-color: var(--success);
    background: rgba(5, 150, 105, 0.08);
}

.result-panel.error {
    border-color: var(--danger);
    background: rgba(220, 38, 38, 0.08);
}

.result-member {
    width: 100%;
}

/* Scan Card Styles */
.scan-card {
    background: var(--bg-secondary);
    border-radius: 12px;
    padding: 12px;
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 12px;
    border: 2px solid var(--border);
    width: 100%;
}

.scan-card.inactive {
    border-color: var(--danger);
}

.sc-status {
    text-align: center;
    background: var(--bg-tertiary);
    padding: 6px 16px;
    border-radius: 4px;
    font-weight: 700;
    font-size: 13px;
    text-transform: uppercase;
    align-self: center;
    width: fit-content;
    margin-bottom: 4px;
}

.sc-status.active {
    background: rgba(5, 150, 105, 0.2);
    color: var(--success);
}

.sc-status.inactive {
    background: rgba(220, 38, 38, 0.2);
    color: var(--danger);
}

.sc-image {
    width: 250px;
    height: 250px;
    /* Fixed square */
    background: #000;
    border-radius: 8px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    flex-shrink: 0;
}

.sc-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    /* Show whole photo */
}

.sc-details {
    display: flex;
    gap: 12px;
    margin-top: auto;
}

.sc-box {
    flex: 1;
    background: var(--bg-tertiary);
    border-radius: 6px;
    padding: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.sc-box .label {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.sc-box .val {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
    margin-top: 4px;
}

.sc-box .expired-text {
    color: var(--danger);
}

.result-error {
    width: 100%;
}

.result-error i {
    font-size: 40px;
    color: var(--danger);
    margin-bottom: 12px;
}

.result-error .error-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--danger);
    margin-bottom: 4px;
}

.result-error .error-msg {
    font-size: 11px;
    color: var(--text-muted);
}

/* Action Buttons */
.scan-actions {
    display: flex;
    gap: 12px;
    margin-top: 12px;
    width: 100%;
}

.allow-entry-btn {
    flex: 1;
    padding: 12px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--text-muted);
    font-weight: 600;
    cursor: not-allowed;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    text-transform: uppercase;
    font-size: 13px;
    transition: all 0.2s;
}

.allow-entry-btn:not([disabled]).success {
    background: var(--success);
    color: #fff;
    border-color: var(--success);
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(5, 150, 105, 0.4);
}

.allow-entry-btn:not([disabled]).warning {
    background: #f59e0b;
    /* Orange */
    color: #fff;
    border-color: #f59e0b;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
}

.allow-entry-btn.secondary {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    cursor: pointer;
    border-color: var(--text-muted);
}

.allow-entry-btn.secondary:hover {
    background: var(--border);
}



.allow-entry-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* ===== NEW MEMBER MULTI-STATE UI ===== */
.new-member-container {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.nm-state {
    display: none;
    flex-direction: column;
    height: 100%;
}

.nm-state.active {
    display: flex;
}

/* Choice Cards */
.choice-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    flex: 1;
}

.choice-card {
    background: var(--bg-tertiary);
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
}

.choice-card:hover {
    border-color: var(--gold);
    transform: translateY(-2px);
}

.choice-card .choice-icon {
    width: 50px;
    height: 50px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.choice-card .choice-icon.daily {
    background: rgba(217, 119, 6, 0.15);
    color: var(--warning);
}

.choice-card .choice-icon.membership {
    background: rgba(5, 150, 105, 0.15);
    color: var(--success);
}

.choice-card .choice-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--text-primary);
}

.choice-card .choice-price {
    font-size: 18px;
    font-weight: 700;
    color: var(--gold);
}

.choice-card .choice-desc {
    font-size: 11px;
    color: var(--text-muted);
}

/* Form Styles */
.nm-form-split-layout {
    display: grid;
    grid-template-columns: 40% 1fr;
    gap: 16px;
    margin-bottom: 12px;
    align-items: stretch;
}

.nm-form-inputs {
    display: flex;
    flex-direction: column;
    gap: 10px;
    justify-content: space-between;
}

.nm-form-group {
    margin-bottom: 0;
    width: 100%;
}

.nm-form-group label {
    display: block;
    font-size: 10px;
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.nm-form-group input {
    width: 100%;
    padding: 8px 10px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 12px;
    font-family: inherit;
    box-sizing: border-box;
}

.nm-form-group input:focus {
    outline: none;
    border-color: var(--gold);
}

.nm-back-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 12px;
    cursor: pointer;
}

.nm-back-link:hover {
    color: var(--gold);
}

/* QR Display */
.qr-display {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    gap: 12px;
}

.qr-box {
    width: 140px;
    height: 140px;
    background: #fff;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px;
}

.qr-box i {
    font-size: 80px;
    color: #222;
}

.qr-member-name {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
}

.qr-member-type {
    font-size: 12px;
    color: var(--gold);
    font-weight: 600;
}

.qr-expires {
    font-size: 10px;
    color: var(--text-muted);
}

/* Modern Daily Pass UI */
.nm-modern-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 32px 24px;
    width: 100%;
    max-width: 340px;
    display: flex;
    flex-direction: column;
    gap: 24px;
    box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
}

.nm-card-header {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.nm-card-header .icon-circle {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    margin-bottom: 4px;
}

.nm-card-header .icon-circle.warning {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
    border: 1px solid rgba(245, 158, 11, 0.2);
}

.nm-card-header .icon-circle.success {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
    border: 1px solid rgba(16, 185, 129, 0.2);
}

.nm-card-header h4 {
    font-size: 18px;
    color: var(--text-primary);
    margin: 0;
}

.nm-card-header p {
    font-size: 13px;
    color: var(--text-muted);
    margin: 0;
}

.nm-form-group .input-wrapper {
    position: relative;
}

.nm-form-group .input-wrapper i {
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    font-size: 14px;
}

.nm-form-group .input-wrapper input {
    padding-left: 40px;
    /* Space for icon */
    height: 48px;
    /* Taller input */
    border-radius: 12px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    font-size: 14px;
}

.nm-form-group .input-wrapper input:focus {
    background: var(--bg-primary);
    border-color: var(--gold);
    box-shadow: 0 0 0 3px rgba(184, 150, 12, 0.15);
}

/* Photo Upload */
.photo-upload-container {
    position: relative;
    height: 100%;
}

.photo-upload-mini {
    width: 100%;
    height: 180px;
    /* Increased height by ~15% */
    border: 2px dashed var(--border);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 11px;
    color: var(--text-muted);
    overflow: hidden;
    flex-direction: column;
    text-align: center;
}

.photo-upload-mini:hover {
    border-color: var(--gold);
    color: var(--gold);
}

.photo-upload-mini i {
    font-size: 24px;
    margin-bottom: 4px;
}

.photo-upload-mini.has-photo {
    border-style: solid;
    padding: 0;
    height: 180px;
    min-height: unset;
}

.remove-photo-btn {
    position: absolute;
    top: 5px;
    right: 5px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--danger);
    color: white;
    border: 2px solid var(--bg-primary);
    /* Border to separate from image */
    display: none;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    font-size: 10px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.remove-photo-btn:hover {
    transform: scale(1.1);
}

.photo-upload-mini .photo-preview {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: #111;
    margin: 0;
}

.photo-upload-mini input[type="file"] {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    top: 0;
    left: 0;
}

/* Status Dropdown */
.status-dropdown {
    padding: 4px 8px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-secondary);
    font-size: 10px;
    cursor: pointer;
}

.status-dropdown:focus {
    outline: none;
    border-color: var(--gold);
}

/* ===== PENDING MEMBERSHIPS ===== */
.nav-badge {
    margin-left: auto;
    background: var(--danger);
    color: #fff;
    font-size: 10px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 10px;
    min-width: 18px;
    text-align: center;
}

.pending-modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    padding: 20px;
}

.pending-modal.active {
    display: flex;
}

.pending-modal-content {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border);
    width: 100%;
    max-width: 500px;
    max-height: 80vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.pending-modal-header {
    padding: 16px 20px;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.pending-modal-header h3 {
    font-size: 14px;
    color: var(--text-primary);
    margin: 0;
}

.pending-modal-close {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 16px;
    cursor: pointer;
}

.pending-modal-body {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

.pending-card {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
    padding: 16px;
    margin-bottom: 12px;
}

.pending-card:last-child {
    margin-bottom: 0;
}

.pending-card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.pending-card-photo {
    width: 60px;
    height: 60px;
    border-radius: var(--radius-sm);
    background: var(--bg-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
    font-size: 24px;
    overflow: hidden;
}

.pending-card-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.pending-card-info h4 {
    font-size: 14px;
    color: var(--text-primary);
    margin: 0 0 4px 0;
}

.pending-card-info p {
    font-size: 11px;
    color: var(--text-muted);
    margin: 2px 0;
}

.pending-card-actions {
    display: flex;
    gap: 8px;
}

.pending-btn {
    flex: 1;
    padding: 10px;
    border-radius: var(--radius-sm);
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.pending-btn.approve {
    background: rgba(5, 150, 105, 0.15);
    border: 1px solid var(--success);
    color: var(--success);
}

.pending-btn.reject {
    background: rgba(220, 38, 38, 0.15);
    border: 1px solid var(--danger);
    color: var(--danger);
}

.pending-btn:hover {
    opacity: 0.8;
}

.pending-empty {
    text-align: center;
    padding: 40px;
    color: var(--text-muted);
}

.pending-empty i {
    font-size: 32px;
    opacity: 0.3;
    margin-bottom: 12px;
    display: block;
}